-- Hub Toggler Script
-- A single, draggable button to open and close the j.0frs Hub.

-- --- SETUP ---
-- A check to prevent the script from running more than once and creating duplicate buttons.
if game:GetService("CoreGui"):FindFirstChild("HubToggleButtonGUI") then
    game:GetService("CoreGui"):FindFirstChild("HubToggleButtonGUI"):Destroy()
end

local CoreGui = game:GetService("CoreGui")
local j0frsHub_GUI = nil -- This variable will store the hub's GUI when it's open.

-- --- GUI CREATION ---
local HubToggleButtonGUI = Instance.new("ScreenGui")
HubToggleButtonGUI.Name = "HubToggleButtonGUI"
HubToggleButtonGUI.Parent = CoreGui
HubToggleButtonGUI.ResetOnSpawn = false
HubToggleButtonGUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local ToggleButton = Instance.new("TextButton")
ToggleButton.Name = "ToggleButton"
ToggleButton.Parent = HubToggleButtonGUI
ToggleButton.Size = UDim2.new(0, 120, 0, 40)
ToggleButton.Position = UDim2.new(0, 10, 0, 10) -- Start at top-left
ToggleButton.BackgroundColor3 = Color3.fromRGB(80, 120, 200)
ToggleButton.BorderSizePixel = 0
ToggleButton.Draggable = true -- Makes the button easy to move around
ToggleButton.Active = true
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.Text = "Open Hub"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextSize = 16
local UICorner = Instance.new("UICorner", ToggleButton, {CornerRadius = UDim.new(0, 5)})

-- --- CORE FUNCTIONALITY ---
ToggleButton.MouseButton1Click:Connect(function()
    -- Check if the hub is currently open. We also check if its parent is nil,
    -- in case it was closed by another script or by an in-hub close button.
    if j0frsHub_GUI and j0frsHub_GUI.Parent then
        -- If it's open, destroy it.
        print("Hub is open. Closing...")
        j0frsHub_GUI:Destroy()
        j0frsHub_GUI = nil -- Set the variable to nil so we know it's closed
        ToggleButton.Text = "Open Hub" -- Update the button text
    else
        -- If it's closed, load the script.
        print("Hub is closed. Loading...")
        ToggleButton.Text = "Loading..." -- Give user feedback
        
        local success, err = pcall(function()
            loadstring(game:HttpGet("https://pastebin.com/raw/GyesYcic", true))()
        end)
        
        if success then
            -- Wait a moment for the GUI to appear
            task.wait(0.5)
            -- Find the newly created GUI and store it in our variable
            j0frsHub_GUI = CoreGui:FindFirstChild("j0frs_main")
            
            if j0frsHub_GUI then
                print("Hub loaded successfully.")
                ToggleButton.Text = "Close Hub" -- Update the button text
            else
                warn("Hub script ran, but could not find the GUI. It might have a new name.")
                ToggleButton.Text = "Open Hub" -- Reset button text on failure
            end
        else
            warn("Failed to load the hub script:", err)
            ToggleButton.Text = "Open Hub" -- Reset button text on failure
        end
    end
end)

print("Hub Toggle Button loaded.")
