-- Hub Toggler Script (v7 - Auto Resizing Edition)
-- This version hides/shows the hub and automatically resizes it for a better mobile fit.

-- --- SETUP ---
if game:GetService("CoreGui"):FindFirstChild("HubToggleButtonGUI") then
    game:GetService("CoreGui"):FindFirstChild("HubToggleButtonGUI"):Destroy()
end

local CoreGui = game:GetService("CoreGui")
local j0frsHub_GUI = nil -- This will store the hub's GUI.

-- --- GUI CREATION ---
local HubToggleButtonGUI = Instance.new("ScreenGui")
HubToggleButtonGUI.Name = "HubToggleButtonGUI"
HubToggleButtonGUI.Parent = CoreGui
HubToggleButtonGUI.ResetOnSpawn = false
HubToggleButtonGUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local ToggleButton = Instance.new("TextButton")
ToggleButton.Name = "ToggleButton"
ToggleButton.Parent = HubToggleButtonGUI
ToggleButton.Size = UDim2.new(0, 120, 0, 40)
ToggleButton.Position = UDim2.new(1, -130, 0, 10) -- Top-right corner
ToggleButton.BackgroundColor3 = Color3.fromRGB(80, 120, 200)
ToggleButton.BorderSizePixel = 0
ToggleButton.Draggable = true
ToggleButton.Active = true
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.Text = "Open Hub"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextSize = 16
local UICorner = Instance.new("UICorner", ToggleButton, {CornerRadius = UDim.new(0, 5)})

-- --- CORE FUNCTIONALITY ---
ToggleButton.MouseButton1Click:Connect(function()
    -- Check if the hub exists at all
    if j0frsHub_GUI and j0frsHub_GUI.Parent then
        -- If it exists, just toggle its visibility
        j0frsHub_GUI.Enabled = not j0frsHub_GUI.Enabled
        
        if j0frsHub_GUI.Enabled then
            ToggleButton.Text = "Close Hub"
            print("Hub is now visible.")
        else
            ToggleButton.Text = "Open Hub"
            print("Hub is now hidden.")
        end
    else
        -- If the hub doesn't exist, this is the first time we're opening it.
        print("Hub not found. Loading for the first time...")
        ToggleButton.Text = "Loading..."
        
        local success, err = pcall(function()
            loadstring(game:HttpGet("https://pastebin.com/raw/GyesYcic", true))()
        end)
        
        if success then
            task.wait(0.5)
            local foundGui = nil
            for _, descendant in ipairs(CoreGui:GetDescendants()) do
                if descendant:IsA("TextLabel") and descendant.Text == "j.0frs Hub" then
                    foundGui = descendant:FindFirstAncestorOfClass("ScreenGui")
                    break
                end
            end

            if foundGui then
                j0frsHub_GUI = foundGui
                
                -- --- THIS IS THE NEW RESIZING CODE ---
                local mainFrame = j0frsHub_GUI:FindFirstChild("MainFrame", true)
                if mainFrame then
                    print("Hub found. Resizing for mobile.")
                    -- New dimensions (Wider and Shorter)
                    local newWidth = 600 
                    local newHeight = 350 
                    
                    mainFrame.Size = UDim2.new(0, newWidth, 0, newHeight)
                    -- Re-center the frame after resizing
                    mainFrame.Position = UDim2.new(0.5, -newWidth / 2, 0.5, -newHeight / 2)
                end
                -- ------------------------------------

                j0frsHub_GUI.Enabled = true
                print("Hub loaded successfully.")
                ToggleButton.Text = "Close Hub"
            else
                warn("Hub script ran, but the GUI could not be found.")
                ToggleButton.Text = "Open Hub"
            end
        else
            warn("Failed to load the hub script:", err)
            ToggleButton.Text = "Open Hub"
        end
    end
end)

print("Hub Toggle Button (Auto Resizing Edition) loaded.")
